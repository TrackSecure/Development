<!DOCTYPE html>
<html lang="pt-br   ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro | Servidor</title>
    <link rel="shortcut icon" href="imgs/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="css/dasboard_inicial_gerente.css">
    <link rel="stylesheet" href="css/cadastro_interno.css">
    <link rel="stylesheet" href="css/cadastro.css">
</head>

<body>
    <div class="pagina">
        <header>
            <div class="perfil">
                <div class="foto">
                    <div class="bolaFoto">
                        <img src="imgs/Persona's.png" alt="Imagem Perfil">
                    </div>
                </div>
                <div class="texto">
                    <span>Alexandre</span>
                    <p>Gerente de monitoramento de Servidor</p>
                </div>
            </div>
            <div class="botao">
                <div class="container">
                    <button onclick="sair()">Sair</button>
                </div>
            </div>
        </header>
        <div class="paginaDash">
            <div class="menu">
                <div class="logo">
                    <img src="imgs/logo.png" alt="logo" class="logo-img">
                    <a href="index.html" class="logo-txt"><span>Track</span>Secure</a>
                </div>
            </div>
            <div class="card_cadastro">
                <span>Cadastro de servidor</span>
                <div class="textos-cadastro", style="align-items: center;">
                    <label for="nome">Nome:</label>
                    <input id="nome_input" type="text" name="nome">
                </div>
                <div style="display: flex; flex-direction: row;">
                    <div class="coluna">
                        <div class="textos-cadastro">
                            <label for="so">Sistema Operacional:</label>
                            <input id="so_input" type="text" name="so">
                        </div>
                        <div class="textos-cadastro">
                            <label for="disco">Disco Total:</label>
                            <input id="disco_input" type="number" name="disco">
                        </div>
                    </div>
                    <div class="coluna">
                        <div class="textos-cadastro">
                            <label for="memoria">Memória Total:</label>
                            <input id="memoria_input" type="number" name="memoria">
                        </div>
                        <div class="textos-cadastro">
                            <label for="cpu">Frequência Máx. CPU:</label>
                            <input id="cpu_input" type="number" name="cpu">
                        </div>
                    </div>
                </div>
                <button class="btn2">Cadastrar</button>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    function cadastrar() {
        var nome = input_nome.value;
        var so = so_input.value;
        var disco = Number(input_disco.value);
        var memoria = Number(input_memoria.value);
        var cpu = Number(input_cpu.value);

        if (nome != '' &&
            so != '' &&
            disco != '' &&
            memoria != '' &&
            cpu != '' 
        ) {
            fetch("/usuarios/cadastrar", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            // crie um atributo que recebe o valor recuperado aqui
            // Agora vá para o arquivo routes/usuario.js
            nomeServer: nomeVar,
            emailServer: emailVar,
            cpfServer: cpfVar,
            telefoneServer: telefoneVar,
            cargoServer: cargoVar,
            codigoServer: codigoVar,
            senhaServer: senhaVar,
          }),
        })
          .then(function (resposta) {
            
            console.log("resposta: ", resposta);

            if (resposta.ok) {
              setTimeout(() => {
                window.location.href = "login.html";
              }, "2000");


            } else {
              console.log('Houve um erro ao tentar realizar o cadastro');
            }
          })
          .catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
          });
        return false;
        }
    }
</script>